<div class="modal-overlay">
    <div class="modal-content">
      <!-- Modal Header -->
      <div class="modal-header">
        <h5 class="modal-title">Student Information</h5>
        <button type="button" class="btn-close" (click)="onClose()">
          <img src="/assets/images/close.svg" alt="Close">
        </button>
      </div>
  
      <!-- Student Information (Always Visible) -->
      <div class="scroll">
        <div class="student-info">
          <div>

            <img [src]="studentInfo?.data?.personalInfo?.profilePicture || '/assets/images/profile.svg'" alt="Student-profile" />
            <input  *ngIf="isEditMode" type="file" (change)="onFileChange($event)" />

            
            <p><strong>Name:</strong> {{ studentInfo.data.name }}</p>
            <p><strong>Student No.:</strong> {{ studentInfo.data.studentNo }}</p>
            <p><strong>Course:</strong>
              <span *ngIf="!isEditMode"> {{ studentInfo.data.personalInfo.course }}</span>
              <select *ngIf="isEditMode" [(ngModel)]="editedDetails.data.personalInfo.course">
                <option value="" disabled>Select Course</option>
                <!--SHS SECTION-->
                <option disabled style="background-color: rgb(218, 218, 218); color: black; font-weight: 600;">Senior High School</option>
                    <option value="SHS - Accountancy, Business and Management">SHS - Accountancy, Business and Management</option>
                    <option value="SHS - General Academic">SHS - General Academic</option>
                    <option value="SHS - Humanities and Social Sciences">SHS - Humanities and Social Sciences</option>
                    <option value="SHS - Science, Technology, Engineering and Math">SHS - Science, Technology, Engineering and Math</option>
                    <option value="SHS - TVL - Home Economics">SHS - TVL-Home Economics</option>
                    <option value="SHS - TVL - Information and Communication Technology">SHS - TVL-Information and Communication Technology</option>
                <!--CCJEF SECTION-->
                <option disabled style="background-color: rgb(218, 218, 218); color: black; font-weight: 600;">College of Criminal Justice Education & Forensics</option>
                    <option value="CCJEF - Bachelor of Forensic Science">Bachelor of Forensic Science</option>
                    <option value="CCJEF - Bachelor of Science in Criminology">Bachelor of Science in Criminology</option>
                <!--SBA SECTION-->
                <option disabled style="background-color: rgb(218, 218, 218); color: black; font-weight: 600;">School of Business and Accountancy</option>
                    <option value="SBA - Bachelor of Science in Accountancy">Bachelor of Science in Accountancy</option>
                    <option value="SBA - Bachelor of Science in Aviation Management">Bachelor of Science in Aviation Management</option>
                    <option value="SBA - Bachelor of Science in Business Administration - Business Management">Bachelor of Science in Business Administration - Business Management</option>
                    <option value="SBA - Bachelor of Science in Business Administration - Legal Management">Bachelor of Science in Business Administration - Legal Management</option>
                    <option value="SBA - Bachelor of Science in Business Administration - Marketing Management">Bachelor of Science in Business Administration - Marketing Management</option>
                    <option value="SBA - Bachelor of Science in Business Administration major in Financial Management">Bachelor of Science in Business Administration major in Financial Management</option>
                    <option value="SBA - Bachelor of Science in Business Administration major in Human Resource Management">Bachelor of Science in Business Administration major in Human Resource Management</option>
                    <option value="SBA - Bachelor of Science in Internal Auditing">Bachelor of Science in Internal Auditing</option>
                    <option value="SBA - Bachelor of Science in Management Accounting">Bachelor of Science in Management Accounting</option>
                <!--SAS SECTION-->
                <option disabled style="background-color: rgb(218, 218, 218); color: black; font-weight: 600;">School of Arts and Sciences</option>
                    <option value="SAS - Bachelor of Arts in Communication">Bachelor of Arts in Communication</option>
                    <option value="SAS - Bachelor of Arts in Psychology">Bachelor of Arts in Psychology</option>
                    <option value="SAS - Bachelor of Arts-Master of Arts in Psychology">Bachelor of Arts-Master of Arts in Psychology</option>
                    <option value="SAS - Bachelor of Science in Psychology">Bachelor of Science in Psychology</option>
                <!--SOC SECTION-->
                <option disabled style="background-color: rgb(218, 218, 218); color: black; font-weight: 600;">School of Computing</option>
                    <option value="SOC - Bachelor of Science in Computer Science">Bachelor of Science in Computer Science</option>
                    <option value="SOC - Bachelor of Science in Cybersecurity">Bachelor of Science in Cybersecurity</option>
                    <option value="SOC - Bachelor of Science in Cybersecurity plus Professional Science Master">Bachelor of Science in Cybersecurity plus Professional Science Master</option>
                    <option value="SOC - Bachelor of Science in Entertainment and Multimedia Computing with Area of Specialization in Digital Animation">Bachelor of Science in Entertainment and Multimedia Computing with Area of Specialization in Digital Animation</option>
                    <option value="SOC - Bachelor of Science in Information Technology-with Area of Specialization in Network Administration">Bachelor of Science in Information Technology-with Area of Specialization in Network Administration</option>
                    <option value="SOC - Bachelor of Science in Information Technology-with Area of Specialization in Web Development">Bachelor of Science in Information Technology-with Area of Specialization in Web Development</option>
                <!--SNAMS SECTION-->
                <option disabled style="background-color: rgb(218, 218, 218); color: black; font-weight: 600;">School of Nursing and Allied Medical Sciences</option>
                    <option value="SNAMS - Bachelor of Science in Medical Technology">Bachelor of Science in Medical Technology</option>
                    <option value="SNAMS - Bachelor of Science in Nursing">Bachelor of Science in Nursing</option>
                    <option value="SNAMS - Bachelor of Science in Radiologic Technology">Bachelor of Science in Radiologic Technology</option>
                <!--SEd SECTION-->
                <option disabled style="background-color: rgb(218, 218, 218); color: black; font-weight: 600;">School of Education</option>
                    <option value="SEd - Bachelor of Elementary Education">Bachelor of Elementary Education</option>
                    <option value="SEd - Bachelor of Physical Education">Bachelor of Physical Education</option>
                    <option value="SEd - Bachelor of Secondary Education - English">Bachelor of Secondary Education - English</option>
                    <option value="SEd - Bachelor of Secondary Education - Filipino">Bachelor of Secondary Education - Filipino</option>
                    <option value="SEd - Bachelor of Secondary Education - Mathematics">Bachelor of Secondary Education - Mathematics</option>
                    <option value="SEd - Bachelor of Secondary Education - Social Studies">Bachelor of Secondary Education - Social Studies</option>
                    <option value="SEd - Bachelor of Secondary Education major in Religious and Values Education">Bachelor of Secondary Education major in Religious and Values Education</option>
                    <option value="SEd - Bachelor of Secondary Education major in Science">Bachelor of Secondary Education major in Science</option>
                    <option value="SEd - Bachelor of Special Needs Education">Bachelor of Special Needs Education</option>
                <!--SHTM SECTION-->
                <option disabled style="background-color: rgb(218, 218, 218); color: black; font-weight: 600;"> School of Hospitality and Tourism Management</option>
                    <option value="SHTM - Bachelor of Science in Hospitality Management with Concentration in Restaurant and Food Service Operation">Bachelor of Science in Hospitality Management with Concentration in Restaurant and Food Service Operation</option>
                    <option value="SHTM - Bachelor of Science in Hospitality Management with Concentration in Accommodations and Lodging Operation">Bachelor of Science in Hospitality Management with Concentration in Accommodations and Lodging Operation</option>
                    <option value="SHTM - Bachelor of Science in Hospitality Management with Concentration in Culinary Arts and Kitchen Operation">Bachelor of Science in Hospitality Management with Concentration in Culinary Arts and Kitchen Operation</option> 
                    <option value="SHTM - Bachelor of Science in International Gastronomy">Bachelor of Science in International Gastronomy</option>
                    <option value="SHTM - Bachelor of Science in Tourism Management with Concentration in Destination Management">Bachelor of Science in Tourism Management with Concentration in Destination Management</option>
                    <option value="SHTM - Bachelor of Science in Tourism Management with Concentration in Events Management">Bachelor of Science in Tourism Management with Concentration in Events Management</option>
                    <option value="SHTM - Bachelor of Science in Tourism Management with Concentration in Travel and Tour Operations">Bachelor of Science in Tourism Management with Concentration in Travel and Tour Operations</option>
                <!--SEA SECTION-->
                <option disabled style="background-color: rgb(218, 218, 218); color: black; font-weight: 600;">School of Engineering and Architecture</option>
                    <option value="SEA - Bachelor of Science in Aeronautical Engineering">Bachelor of Science in Aeronautical Engineering</option>
                    <option value="SEA - Bachelor of Science in Architecture">Bachelor of Science in Architecture</option>
                    <option value="SEA - Bachelor of Science in Civil Engineering">Bachelor of Science in Civil Engineering</option>
                    <option value="SEA - Bachelor of Science in Computer Engineering">Bachelor of Science in Computer Engineering</option>
                    <option value="SEA - BS Electrical Engineering">Bachelor of Science in Electrical Engineering</option>
                    <option value="SEA - BS Electronics Engineering">Bachelor of Science in Electronics Engineering</option>
                    <option value="SEA - Bachelor of Science in Industrial Engineering">Bachelor of Science in Industrial Engineering</option>
                    <option value="SEA - Bachelor of Science in Mechanical Engineering">Bachelor of Science in Mechanical Engineering</option>
                    <option value="SEA - Bachelor of Science in Civil Engineering (Construction Engineering and Management)">Bachelor of Science in Civil Engineering (Construction Engineering and Management)</option>
                    <option value="SEA - Bachelor of Science in Civil Engineering (Structural Engineering)">Bachelor of Science in Civil Engineering (Structural Engineering)</option>
                    <option value="SEA - Bachelor of Science in Civil Engineering (Transportation Engineering)">Bachelor of Science in Civil Engineering (Transportation Engineering)</option>
              </select>
            </p>
            <p><strong>Year Level:</strong> 
              <span *ngIf="!isEditMode"> {{ studentInfo.data.personalInfo.yearLevel }}</span>
              <select *ngIf="isEditMode" [(ngModel)]="editedDetails.data.personalInfo.yearLevel"> 
                <option value="" disabled>Select Year Level</option>
                <option value="Grade 11">Grade 11</option>
                <option value="Grade 12">Grade 12</option>
                <option value="1st Year">1st Year</option>
                <option value="2nd Year">2nd Year</option>
                <option value="3rd Year">3rd Year</option>
                <option value="4th Year">4th Year</option>
              </select>
            </p>
          </div>
          <div class="student-details">
            <div class="student-details1">
              <p><strong>Room & Bed Letter:</strong> {{ studentInfo.data.roomAssigned?.roomNumber }} - {{ studentInfo.data.roomAssigned?.bedLetter }}</p>
              <p><strong>Status:</strong> {{ studentInfo.data.status }}</p>
              <p><strong>Building:</strong> {{ studentInfo.data.roomAssigned?.building }}</p>
              <p><strong>Date of Approval:</strong> {{ studentInfo.data.approvedAt | date:'mediumDate' }}</p>
            </div>
            <hr>
            <div class="student-details2">
              <p><strong>Sex:</strong> {{ studentInfo.data.personalInfo.sex }}</p>
              <p><strong>Nationality:</strong> {{ studentInfo.data.personalInfo.nationality }}</p>

              <p><strong>Age:</strong> 
                <span *ngIf="!isEditMode"> {{ studentInfo.data.personalInfo.age }}</span>
                <input *ngIf="isEditMode" type="number" [(ngModel)]="studentInfo.data.personalInfo.age" /></p>

              <p><strong>Religion:</strong> 
                <span *ngIf="!isEditMode"> {{ studentInfo.data.personalInfo.religion }}</span>
                <input *ngIf="isEditMode" type="text" [(ngModel)]="studentInfo.data.personalInfo.religion" /></p>
              
              <p><strong>Date of Birth:</strong> {{ studentInfo.data.personalInfo.dateOfBirth | date:'mediumDate' }}</p>
              <p><strong>Civil Status:</strong> {{ studentInfo.data.personalInfo.civilStatus }}</p>
              <p><strong>Place of Birth:</strong> {{ studentInfo.data.personalInfo.placeOfBirth }}</p>

              <p><strong>Email:</strong> {{ studentInfo.data.email }}</p>
              <p><strong>Weight:</strong>  
                <span *ngIf="!isEditMode"> {{ studentInfo.data.healthCondition.weight }} kg</span>
                <input *ngIf="isEditMode" type="number" [(ngModel)]="studentInfo.data.healthCondition.weight" /></p>

              <p><strong>Tel No:</strong> 
                <span *ngIf="!isEditMode"> {{ studentInfo.data.personalInfo.telNo }}</span>
                <input *ngIf="isEditMode" type="number" [(ngModel)]="studentInfo.data.personalInfo.telNo" /></p>

              <p><strong>Height:</strong> 
                <span *ngIf="!isEditMode"> {{ studentInfo.data.healthCondition.height }} cm</span>
                <input *ngIf="isEditMode" type="number" [(ngModel)]="studentInfo.data.healthCondition.height" /></p>
                
              <p><strong>Facebook:</strong> 
                <span *ngIf="!isEditMode"> {{ studentInfo.data.personalInfo.facebookAcct }}</span>
                <input *ngIf="isEditMode" type="text" [(ngModel)]="studentInfo.data.personalInfo.facebookAcct" /></p>
                
              <p><strong>Wears Glasses:</strong> 
                <span *ngIf="!isEditMode">{{ studentInfo.data.healthCondition.glasses ? 'Yes' : 'No' }}</span>
                <select class="wear-glasses-option" *ngIf="isEditMode" [(ngModel)]="studentInfo.data.healthCondition.glasses">
                  <option [value]="true">Yes</option>
                  <option [value]="false">No</option>
                </select>
              </p>
              
              
              <p><strong>Address:</strong>
                <span *ngIf="!isEditMode">
                  {{ studentInfo.data.personalInfo.homeAddress.country }},
                  {{ studentInfo.data.personalInfo.homeAddress.city }},
                  {{ studentInfo.data.personalInfo.homeAddress.province }},
                  {{ studentInfo.data.personalInfo.homeAddress.houseNumber }},
                  {{ studentInfo.data.personalInfo.homeAddress.zipCode }}
                </span>
                <span class="edit-address" *ngIf="isEditMode">
                  <input [(ngModel)]="studentInfo.data.personalInfo.homeAddress.country" placeholder="Country" />
                  <input [(ngModel)]="studentInfo.data.personalInfo.homeAddress.city" placeholder="City" />
                  <input [(ngModel)]="studentInfo.data.personalInfo.homeAddress.province" placeholder="Province" />
                  <input [(ngModel)]="studentInfo.data.personalInfo.homeAddress.houseNumber" placeholder="House Number" />
                  <input [(ngModel)]="studentInfo.data.personalInfo.homeAddress.zipCode" placeholder="Zip Code" />
                </span>
              </p>
            </div>
          </div>
        </div>
  
        <!-- Tabs Section -->
        <ul class="tabs">
          <li [class.active]="activeTab === 'family'" (click)="setActiveTab('family')">Family Background</li>
          <li [class.active]="activeTab === 'health'" (click)="setActiveTab('health')">Health Conditions</li>
          <li [class.active]="activeTab === 'others'" (click)="setActiveTab('others')">Other Information</li>
        </ul>
  
        <!-- Tab Content Section -->
        <div class="tab-content">
          <!-- Family Background Tab -->
          <div *ngIf="activeTab === 'family'">
            <div class="family-section">
              <h6>Father's Details</h6>
              <div class="nested-details">
                <p><strong>Name:</strong> {{ studentInfo.data.familyBackground.fatherDetails.name }}</p>
                <p><strong>Date of Birth:</strong> {{ studentInfo.data.familyBackground.fatherDetails.dateOfBirth | date:'mediumDate' }}</p>
                <p><strong>Age:</strong> {{ studentInfo.data.familyBackground.fatherDetails.age }}</p>
                <p><strong>Place of Birth:</strong> {{ studentInfo.data.familyBackground.fatherDetails.placeOfBirth }}</p>
                <p><strong>Religion:</strong> {{ studentInfo.data.familyBackground.fatherDetails.religion }}</p>
                <p><strong>Nationality:</strong> {{ studentInfo.data.familyBackground.fatherDetails.nationality }}</p>
                <p><strong>Occupation:</strong> {{ studentInfo.data.familyBackground.fatherDetails.occupation }}</p>
                <p><strong>Employer:</strong> {{ studentInfo.data.familyBackground.fatherDetails.nameOfEmployer }}</p>
                <p><strong>Address:</strong>
                  {{ studentInfo.data.familyBackground.fatherDetails.homeAddress.houseNumber }},
                  {{ studentInfo.data.familyBackground.fatherDetails.homeAddress.city }},
                  {{ studentInfo.data.familyBackground.fatherDetails.homeAddress.province }},
                  {{ studentInfo.data.familyBackground.fatherDetails.homeAddress.country }},
                  {{ studentInfo.data.familyBackground.fatherDetails.homeAddress.zipCode }}
                </p>
                <p><strong>Telephone No:</strong> {{ studentInfo.data.familyBackground.fatherDetails.telNo }}</p>
              </div>
              <h6>Mother's Details</h6>
              <div class="nested-details">
                <p><strong>Name:</strong> {{ studentInfo.data.familyBackground.motherDetails.name }}</p>
                <p><strong>Date of Birth:</strong> {{ studentInfo.data.familyBackground.motherDetails.dateOfBirth | date:'mediumDate' }}</p>
                <p><strong>Age:</strong> {{ studentInfo.data.familyBackground.motherDetails.age }}</p>
                <p><strong>Place of Birth:</strong> {{ studentInfo.data.familyBackground.motherDetails.placeOfBirth }}</p>
                <p><strong>Religion:</strong> {{ studentInfo.data.familyBackground.motherDetails.religion }}</p>
                <p><strong>Nationality:</strong> {{ studentInfo.data.familyBackground.motherDetails.nationality }}</p>
                <p><strong>Occupation:</strong> {{ studentInfo.data.familyBackground.motherDetails.occupation }}</p>
                <p><strong>Employer:</strong> {{ studentInfo.data.familyBackground.motherDetails.nameOfEmployer }}</p>
                <p><strong>Address:</strong>
                  {{ studentInfo.data.familyBackground.motherDetails.homeAddress.houseNumber }},
                  {{ studentInfo.data.familyBackground.motherDetails.homeAddress.city }},
                  {{ studentInfo.data.familyBackground.motherDetails.homeAddress.province }},
                  {{ studentInfo.data.familyBackground.motherDetails.homeAddress.country }},
                  {{ studentInfo.data.familyBackground.motherDetails.homeAddress.zipCode }}
                </p>
                <p><strong>Telephone No:</strong> {{ studentInfo.data.familyBackground.motherDetails.telNo }}</p>
              </div>
            </div>
  
            <h6>Siblings Information</h6>
            <div *ngIf="studentInfo.data.familyBackground.numberOfSiblings.length > 0; else noSiblings">
              <table>
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Classification</th>
                    <th>Sex</th>
                    <th>Age</th>
                    <th>Civil Status</th>
                    <th>School/Company</th>
                    <th>Grade/Company</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let sibling of studentInfo.data.familyBackground.numberOfSiblings">
                    <td>{{ sibling.name }}</td>
                    <td>{{ sibling.classification }}</td>
                    <td>{{ sibling.sex }}</td>
                    <td>{{ sibling.age }}</td>
                    <td>{{ sibling.civilStatus }}</td>
                    <td>{{ sibling.schoolOccupation }}</td>
                    <td>{{ sibling.gradeCompany }}</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <ng-template #noSiblings>
              <p>No siblings information available.</p>
            </ng-template>
          </div>
  
          <!-- Health Conditions Tab -->
          <div class="health-tab" *ngIf="activeTab === 'health'">
            <p><strong>Weight:</strong> {{ studentInfo.data.healthCondition.weight }} kg</p>
            <p><strong>Height:</strong> {{ studentInfo.data.healthCondition.height }} cm</p>
            <p><strong>Glasses:</strong> {{ studentInfo.data.healthCondition.glasses ? 'Yes' : 'No' }}</p>
            <h6>Illnesses</h6>
            <table>
              <thead>
                <tr>
                  <th>Illness</th>
                  <th>Age</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let illness of studentInfo.data.healthCondition.illnesses">
                  <td>{{ illness.name }}</td>
                  <td>{{ illness.age }}</td>
                </tr>
              </tbody>
            </table>
          </div>
  
          <!-- Others Tab -->
          <div class="others" *ngIf="activeTab === 'others'">
            <table>
              <thead>
                <tr>
                  <th>Hobbies</th>
                  <th>Talent/Skills</th>
                  <th>Leisure Time</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <ul>
                      <li *ngFor="let hobby of studentInfo.data.hobbies">{{ hobby }}</li>
                    </ul>
                  </td>
                  <td>
                    <ul>
                      <li *ngFor="let talent of studentInfo.data.talentsSkills">{{ talent }}</li>
                    </ul>
                  </td>
                  <td>
                    <ul>
                      <li *ngFor="let leisure of studentInfo.data.leisureTime">{{ leisure }}</li>
                    </ul>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>


      <div class="modal-footer">
        <!-- <button type="button" class="btn btn-secondary" (click)="onClose()">Close</button> -->

        <div *ngIf="isEditMode && isRenewalStarted && !isRenewalSubmitted">
          <button class="btn" (click)="saveChanges()" [disabled]="isSaving">
            <span *ngIf="isSaving" class="spinner-border spinner-border-sm"></span>
            Save
          </button>

          <button class="btn btn-secondary" (click)="cancelEdit()">Cancel</button>

        </div>

        <div *ngIf="!isEditMode && isRenewalStarted && !isRenewalSubmitted && isUnderRenewal">
          <button class="btn" (click)="toggleEditMode()">Edit</button>
        </div>

      </div>

      
    </div>
  </div>